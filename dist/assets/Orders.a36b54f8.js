import{h as y}from"./moment.9709ab41.js";import{P}from"./vue-pagination-2.min.a2874229.js";import{_ as S}from"./Constants.509ac60c.js";import{S as w}from"./SaleStatus.c13a30a1.js";import{_ as f,r as m,o as l,c as h,a as e,t as i,i as k,j as b,b as p,w as _,a4 as N,v as V,a3 as g,a5 as C,d as R}from"./index.03d082ff.js";import"./index.esm.eae64ffd.js";const O={mixins:[S],components:{SaleStatus:w},props:["item","currentPage","index","perPage"],data(){return{visitcomments:!1}},methods:{details(n){this.$router.push({name:"saledetails",params:{saleid:n.id}})},showchats(){this.$store.commit("assignorderconversation",this.item),this.visitcomments=!this.visitcomments}}},B={key:0},D=e("i",{class:"bx bx-rupee"},null,-1),M=e("i",{class:"bx bx-detail"},null,-1),U=[M],A={key:0},$={colspan:"13"};function j(n,t,o,v,s,a){var c,r,d;const u=m("SaleStatus");return o.item!=null?(l(),h("tbody",B,[e("tr",null,[e("td",null,i((o.currentPage-1)*o.perPage+(o.index+1)),1),e("td",null,i((c=o.item.patient)==null?void 0:c.name),1),e("td",null,i((r=o.item.patient)==null?void 0:r.mobile),1),e("td",null,i(o.item.id),1),e("td",null,[D,k(" "+i(o.item.amountwithtax),1)]),e("td",null,i((d=o.item.enteredby)==null?void 0:d.name),1),e("td",null,i(n.fetchstatus(o.item)),1),e("td",null,[e("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=x=>a.details(o.item))},U)]),e("td",null,[e("button",{class:"badge btn-prime btn-xs",onClick:t[1]||(t[1]=x=>a.showchats(o.item))},"Status")])]),s.visitcomments?(l(),h("tr",A,[e("td",$,[b(u,{item:o.item},null,8,["item"])])])):p("",!0)])):p("",!0)}const E=f(O,[["render",j]]),I={components:{Pagination:P,OrdersRow:E},data(){return{rows:0,perPage:10,moment:y,currentPage:1,sales:[],headertype:"",headericon:"",search:null}},mounted(){this.refresh()},watch:{"$route.params.status"(n){this.refresh()}},methods:{clickCallback(n){this.currentpage=n,this.$store.commit("assigncurrentpage",n),this.refresh()},refresh(){this.getorderheader();let n={noofrec:this.perPage,currentpage:this.currentPage,status:this.$route.params.status,search:this.search};this.$store.commit("assignloadingstatus",1),axios.post("api/fetch/sale",n).then(t=>this.processResponseSale(t.data)).catch(t=>console.log(t))},processResponseSale(n){this.$store.commit("assignloadingstatus",0),this.sales=n.sale,this.rows=n.count},getorderheader(){return console.log(this.$route.params.status),this.$route.params.status==0?(this.headertype="Pending",this.headericon="/src/assets/pending-order.png"):this.$route.params.status==1?(this.headertype="Approved",this.headericon="/src/assets/shopping-bag.png"):this.$route.params.status==2?(this.headertype="Rejected",this.headericon="/src/assets/cancel-order.png"):this.$route.params.status==3?(this.headertype="Dispatched",this.headericon="/src/assets/shipped.png"):this.$route.params.status==4?(this.headertype="On the Way",this.headericon="/src/assets/tracking.png"):this.$route.params.status==5&&(this.headertype="Delievered",this.headericon="/src/assets/delievered.png"),console.log(this.headertype),this.headertype}}},T={class:"headline mb-20"},z={class:"title flex-row-centered"},F=["src"],L={class:"title-span"},W={cslass:"flex-row-centered"},q=e("i",{class:"bx bx-refresh",style:{"font-size":"35px"}},null,-1),G=[q],H={class:"col-md-12 mb-30 row"},J={class:"col-md-3 mt-30"},K=e("label",{for:""},"No of. Records",-1),Q=e("option",{value:10},"10",-1),X=e("option",{value:20},"20",-1),Y=e("option",{value:50},"50",-1),Z=e("option",{value:100},"100",-1),ee=[Q,X,Y,Z],te={class:"col-md-8 text-right row mt-30"},se=e("label",{class:"col-md-2 mt-10",for:""},"Search",-1),oe={class:"col-md-12"},ne={class:"table-responsive"},re={class:"table",style:{"text-align":"center"}},ie=e("thead",null,[e("tr",null,[e("th",null,"S.No"),e("th",null,"Patient"),e("th",null,"Mobile No."),e("th",null,"Invoice No."),e("th",null,"Amount"),e("th",null,"Entered By"),e("th",null,"Staus"),e("th",null,"Details"),e("th",null,"Update Status")])],-1);function ae(n,t,o,v,s,a){const u=m("OrdersRow"),c=m("pagination");return l(),h(g,null,[e("div",null,[e("div",T,[e("div",z,[e("img",{src:s.headericon,class:"img",width:"20",height:"20"},null,8,F),e("div",L,i(s.headertype)+" Orders",1)]),e("div",W,[e("button",{class:"btn btn-refresh refresh-resp",style:{"margin-left":"20px"},onClick:t[0]||(t[0]=r=>a.refresh())},G)])])]),e("div",H,[e("div",J,[K,_(e("select",{name:"",id:"","onUpdate:modelValue":t[1]||(t[1]=r=>s.perPage=r)},ee,512),[[N,s.perPage]])]),e("div",te,[se,_(e("input",{type:"text",placeholder:"Search Name, Mobile No., Amount, Invoice No.",class:"form-control col-md-6","onUpdate:modelValue":t[2]||(t[2]=r=>s.search=r)},null,512),[[V,s.search]]),e("button",{class:"btn btn-success",onClick:t[3]||(t[3]=r=>a.refresh())},"Search")])]),e("div",oe,[e("div",ne,[e("table",re,[ie,(l(!0),h(g,null,C(s.sales,(r,d)=>(l(),R(u,{item:r,index:d,currentPage:s.currentPage,perPage:s.perPage,key:r.id},null,8,["item","index","currentPage","perPage"]))),128))])]),b(c,{modelValue:s.currentPage,"onUpdate:modelValue":t[4]||(t[4]=r=>s.currentPage=r),records:s.rows,"per-page":s.perPage,onPaginate:a.clickCallback},null,8,["modelValue","records","per-page","onPaginate"])])],64)}const pe=f(I,[["render",ae]]);export{pe as default};
